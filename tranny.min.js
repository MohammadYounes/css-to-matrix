(function(){var a,b,c,d,e={}.hasOwnProperty;c=require("umodel"),d={rad:function(a){var b,c;return"string"==typeof a&&(b=parseFloat(a,10),c=a.indexOf(!1),c&&(b*=Math.PI/180),a=b),a},copy:function(a){return a.slice()},extend:function(a,b){var c;for(c in b)e.call(b,c)&&(a[c]=b[c]);return a},fluent:function(a){return function(){return a.apply(this,arguments),this}}},a=function(a,b){var e;return e=function(){function e(a){a&&this.matrix(a)}return e.prototype.model=new c({matrix:new b.Identity,transformations:{perspective:new b.Identity,rotate:new b.Identity,scale:new b.Identity,skew:new b.Identity,translate:new b.Identity}}),e.prototype.matrix=function(a){var b,c;if(c=a.length,b=c[0]?c[0].length:0,4!==c||4!==b)throw new Error("expected parameter `data` to be a 4x4 matrix of arrays, but was given a "+c+"x"+b+" matrix");return this.model.set("matrix",a)},e.prototype.getMatrix=function(){return this.apply()},e.prototype.getMatrixCSS=function(){var a,b,c,d,e,f,g,h;for(c=this.apply(),a=[],e=0,g=c.length;g>e;e++)for(d=c[e],f=0,h=d.length;h>f;f++)b=d[f],a.push(b);return"matrix3d("+a.join(",")+")"},e.prototype.apply=function(){var a,c;return a=this.model.get("matrix"),c=this.model.get("transformations"),a=b.multiply(a,c.perspective),a=b.multiply(a,c.translate),a=b.multiply(a,c.rotate),a=b.multiply(a,c.skew),a=b.multiply(a,c.scale),b.flip(a)},e.prototype.rotate=function(a){return this.rotateZ(a)},e.prototype.rotateX=function(a){return this.rotate3d(1,0,0,a)},e.prototype.rotateY=function(a){return this.rotate3d(0,1,0,a)},e.prototype.rotateZ=function(a){return this.rotate3d(0,0,1,a)},e.prototype.scale=function(a,b){return this.scale3d(a,b)},e.prototype.scaleX=function(a){return this.scale3d(a)},e.prototype.scaleY=function(a){return null==a&&(a=1),this.scale3d(null,a)},e.prototype.scaleZ=function(a){return null==a&&(a=1),this.scale3d(null,null,a)},e.prototype.skewX=function(a){return this.skew(a)},e.prototype.skewY=function(a){return this.skew(null,a)},e.prototype.translate=function(a,b){return this.translate3d(a,b)},e.prototype.translateX=function(a){return this.translate3d(a)},e.prototype.translateY=function(a){return null==a&&(a=0),this.translate3d(null,a)},e.prototype.translateZ=function(a){return null==a&&(a=0),this.translate3d(null,null,a)},e.prototype.perspective=d.fluent(function(b){return null==b&&(b=0),this.model.set("transformations/perspective",a.perspective(b))}),e.prototype.rotate3d=d.fluent(function(b,c,e,f){return null==b&&(b=0),null==c&&(c=0),null==e&&(e=0),null==f&&(f=0),this.model.set("transformations/rotate",a.rotate3d(b,c,e,d.rad(f)))}),e.prototype.scale3d=d.fluent(function(b,c,d){return null==b&&(b=1),null==c&&(c=1),null==d&&(d=1),this.model.set("transformations/scale",a.scale3d(b,c,d))}),e.prototype.skew=d.fluent(function(c,e){return null==c&&(c=0),null==e&&(e=0),this.model.set("transformations/skew",b.to3d(a.skew(d.rad(c),d.rad(e))))}),e.prototype.translate3d=d.fluent(function(b,c,d){return null==b&&(b=0),null==c&&(c=0),null==d&&(d=0),this.model.set("transformations/translate",a.translate3d(b,c,d))}),e}()},b=function(a,b){return"object"==typeof exports?module.exports=b(require("transform-to-matrix"),require("matrix-utilities"),require("umodel")):"function"==typeof define&&define.amd?define(a,["transform-to-matrix","matrix-utilities","umodel"],function(){return b}):this[a]=b(this["transform-to-matrix"],this["matrix-utilities"],this.umodel)},b("Tranny",a)}).call(this);