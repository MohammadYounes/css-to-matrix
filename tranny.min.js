(function(){var a,b,c={}.hasOwnProperty;b=function(a,b,d){var e,f;return f={rad:function(a){var b,c;return"string"==typeof a&&(b=parseFloat(a,10),c=a.indexOf(!1),c&&(b*=Math.PI/180),a=b),a},copy:function(a){return a.slice()},extend:function(a,b){var d;for(d in b)c.call(b,d)&&(a[d]=b[d]);return a},fluent:function(a){return function(){return a.apply(this,arguments),this}}},e=function(){function c(a){a&&this.matrix(a)}return c.prototype.model=new b({matrix:new a.Identity,transformations:{perspective:new a.Identity,rotate:new a.Identity,scale:new a.Identity,skew:new a.Identity,translate:new a.Identity}}),c.prototype.matrix=function(a){var b,c;if(c=a.length,b=c[0]?c[0].length:0,4!==c||4!==b)throw new Error("expected parameter `data` to be a 4x4 matrix of arrays, but was given a "+c+"x"+b+" matrix");return this.model.set("matrix",a)},c.prototype.getMatrix=function(){return this.apply()},c.prototype.getMatrixCSS=function(){var a,b,c,d,e,f,g,h;for(c=this.apply(),a=[],e=0,g=c.length;g>e;e++)for(d=c[e],f=0,h=d.length;h>f;f++)b=d[f],a.push(b);return"matrix3d("+a.join(",")+")"},c.prototype.apply=function(){var b,c;return b=this.model.get("matrix"),c=this.model.get("transformations"),b=a.multiply(b,c.perspective),b=a.multiply(b,c.translate),b=a.multiply(b,c.rotate),b=a.multiply(b,c.skew),b=a.multiply(b,c.scale),a.flip(b)},c.prototype.rotate=function(a){return this.rotateZ(a)},c.prototype.rotateX=function(a){return this.rotate3d(1,0,0,a)},c.prototype.rotateY=function(a){return this.rotate3d(0,1,0,a)},c.prototype.rotateZ=function(a){return this.rotate3d(0,0,1,a)},c.prototype.scale=function(a,b){return this.scale3d(a,b)},c.prototype.scaleX=function(a){return this.scale3d(a)},c.prototype.scaleY=function(a){return null==a&&(a=1),this.scale3d(null,a)},c.prototype.scaleZ=function(a){return null==a&&(a=1),this.scale3d(null,null,a)},c.prototype.skewX=function(a){return this.skew(a)},c.prototype.skewY=function(a){return this.skew(null,a)},c.prototype.translate=function(a,b){return this.translate3d(a,b)},c.prototype.translateX=function(a){return this.translate3d(a)},c.prototype.translateY=function(a){return null==a&&(a=0),this.translate3d(null,a)},c.prototype.translateZ=function(a){return null==a&&(a=0),this.translate3d(null,null,a)},c.prototype.perspective=f.fluent(function(a){return null==a&&(a=0),this.model.set("transformations/perspective",d.perspective(a))}),c.prototype.rotate3d=f.fluent(function(a,b,c,e){return null==a&&(a=0),null==b&&(b=0),null==c&&(c=0),null==e&&(e=0),this.model.set("transformations/rotate",d.rotate3d(a,b,c,f.rad(e)))}),c.prototype.scale3d=f.fluent(function(a,b,c){return null==a&&(a=1),null==b&&(b=1),null==c&&(c=1),this.model.set("transformations/scale",d.scale3d(a,b,c))}),c.prototype.skew=f.fluent(function(b,c){return null==b&&(b=0),null==c&&(c=0),this.model.set("transformations/skew",a.to3d(d.skew(f.rad(b),f.rad(c))))}),c.prototype.translate3d=f.fluent(function(a,b,c){return null==a&&(a=0),null==b&&(b=0),null==c&&(c=0),this.model.set("transformations/translate",d.translate3d(a,b,c))}),c}()},a=function(a,b){return"object"==typeof exports?module.exports=b(require("matrix-utilities"),require("umodel"),require("transform-to-matrix")):"function"==typeof define&&define.amd?define(a,["matrix-utilities","umodel","transform-to-matrix"],b):this[a]=b(this["matrix-utilities"],this.umodel,this["transform-to-matrix"])},a("Tranny",b)}).call(this);